(()=>{var e={937:(e,t,a)=>{const{useState:r,useEffect:n}=React,o=a(603),c=async e=>{e.preventDefault(),o.hideError();const t=e.target.querySelector("#jarName").value,a=e.target.querySelector("#_csrf").value;return t?(await o.sendRequest("POST",e.target.action,{jarName:t,_csrf:a}),!1):(o.handleError("You didn't enter a jar name!"),!1)};e.exports={JarCreationWindow:e=>React.createElement("form",{id:"jarForm",onSubmit:c,name:"jarForm",action:"/makeJar",method:"POST",className:"jarForm"},React.createElement("h1",null,"Create a Personal Jar: "),React.createElement("label",{htmlFor:"jarName"},"Jar Name: "),React.createElement("input",{id:"jarName",type:"text",name:"jarName",placeholder:"Jar Name"}),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("input",{className:"makeJar",type:"submit",value:"Create Jar"})),LocationJarContainer:e=>{const[t,a]=r(e.quotes),[c,l]=r(e.location);if(n((async()=>{setTimeout((async()=>{let e;await navigator.geolocation.getCurrentPosition((t=>{const a={latitude:t.coords.latitude,longitude:t.coords.longitude};e=a})),setTimeout((async()=>{if(void 0!==e){const t=await fetch("/getLocationQuotes?longitude="+e.longitude+"&latitude="+e.latitude,{method:"GET",headers:{Accept:"application/json"}}),r=(await t.json()).quotes;a(r),l(e),console.log("just checked quotes and location")}else o.handleError("Unable to access your location!")}),5e3)}),1e4)})),0===t.length||!t)return React.createElement("div",null,React.createElement("h3",null,"No quotes here!"));const i=t.map((e=>React.createElement("div",{key:e._id},React.createElement("h2",null,e.quoteCopy," - overheard by ",React.createElement("i",null,e.owner)))));return React.createElement("div",null,React.createElement("h1",null,"Quotes in Your Area"),i)}}},615:(e,t,a)=>{const r=a(603),n=e=>{e.preventDefault(),r.hideError();const t=e.target.querySelector("#user").value,a=e.target.querySelector("#pass").value,n=e.target.querySelector("#_csrf").value,o=document.getElementsByName("premiumChoice");let c;for(let e of o)e.checked&&(c=e.value);return t&&a&&null!==c?(r.sendRequest("PUT",e.target.action,{username:t,pass:a,premium:c,_csrf:n}),!1):(r.handleError("All fields are required!"),!1)};e.exports={PremiumWindow:e=>React.createElement("form",{id:"PremiumForm",name:"PremiumForm",onSubmit:n,action:"/setPremium",method:"POST",className:"mainForm"},React.createElement("h2",null,"Change Your Premium Status?"),React.createElement("label",{htmlFor:"username"},"Username: "),React.createElement("input",{id:"user",type:"text",name:"username",placeholder:"username"}),React.createElement("label",{htmlFor:"pass"},"Password: "),React.createElement("input",{id:"pass",type:"password",name:"pass",placeholder:"password"}),React.createElement("div",{id:"premiumChoice"},React.createElement("input",{type:"radio",id:"premiumY",name:"premiumChoice",value:"true"}),React.createElement("label",{htmlFor:"premiumY"},"Enroll in premium."),React.createElement("br",null),React.createElement("input",{type:"radio",id:"premiumN",name:"premiumChoice",value:"false"}),React.createElement("label",{htmlFor:"premiumN"},"Unenroll in premium."),React.createElement("br",null)),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("input",{className:"formSubmit",type:"submit",value:"Change Premium Status"}))}},59:(e,t,a)=>{const r=a(603),n=async e=>{e.preventDefault(),r.hideError();const t=e.target.querySelector("#quoteCopy").value,a=e.target.querySelector("#_csrf").value;if(!t)return r.handleError("You didn't enter a quote!"),!1;let n;await navigator.geolocation.getCurrentPosition((e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude};n=t})),setTimeout((()=>void 0!==n?(r.sendRequest("POST","/addLocationQuote",{quoteCopy:t,location:n,_csrf:a}),!1):(r.handleError("Unable to access your location!"),!1)),5e3)};e.exports={LocationQuoteWindow:e=>React.createElement("form",{id:"lqForm",onSubmit:n,name:"lqForm",action:"/addLocationQuote",method:"POST",className:"lqForm"},React.createElement("h1",null,"Add a Location-based Quote:"),React.createElement("label",{htmlFor:"quoteCopy"},"Quote: "),React.createElement("input",{id:"quoteCopy",type:"text",name:"quoteCopy",placeholder:"What'd you hear?"}),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("input",{className:"submitQuote",type:"submit",value:"Submit Quote"}))}},603:e=>{const t=e=>{document.getElementById("errorText").textContent=e,document.getElementById("errorMessage").classList.remove("hidden")};e.exports={handleError:t,sendRequest:async(e,a,r,n)=>{const o=await fetch(a,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),c=await o.json();document.getElementById("errorMessage").classList.add("hidden"),c.redirect&&(window.location=c.redirect),c.error&&t(c.error),n&&n(c)},hideError:()=>{document.getElementById("errorMessage").classList.add("hidden")},getLocation:async()=>navigator.geolocation.getCurrentPosition((e=>({latitude:e.coords.latitude,longitude:e.coords.longitude})))}}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,a),o.exports}(()=>{const{JarCreationWindow:e,LocationJarContainer:t}=a(937),{LocationQuoteWindow:r}=a(59),{PremiumWindow:n}=a(615),o=a(603);window.onload=async()=>{const a=await fetch("/getToken"),c=(await a.json()).csrfToken,l=document.getElementById("makeJarButton"),i=document.getElementById("premiumButton");let u;l.addEventListener("click",(t=>(t.preventDefault(),ReactDOM.render(React.createElement(e,{csrf:c}),document.getElementById("content")),ReactDOM.render("",document.getElementById("content2")),!1))),i.addEventListener("click",(e=>(e.preventDefault(),ReactDOM.render(React.createElement(n,{csrf:c}),document.getElementById("content")),ReactDOM.render("",document.getElementById("content2")),!1))),await navigator.geolocation.getCurrentPosition((e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude};u=t})),setTimeout((async()=>{if(void 0===u)return o.handleError("Unable to access your location!"),!1;{const e=await fetch("/getLocationQuotes?longitude="+u.longitude+"&latitude="+u.latitude,{method:"GET",headers:{Accept:"application/json"}}),a=await e.json();ReactDOM.render(React.createElement(t,{quotes:a.quotes,location:u,csrf:c}),document.getElementById("content"))}}),2e3),ReactDOM.render(React.createElement(r,{csrf:c}),document.getElementById("content2"))}})()})();