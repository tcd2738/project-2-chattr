(()=>{var e={59:(e,t,o)=>{const{useState:n,useEffect:a}=React,c=o(603),r=async e=>{e.preventDefault();const t=e.target.querySelector("#quoteCopy").value,o=e.target.querySelector("#_csrf").value;if(!t)return c.handleError("You didn't enter a quote!"),!1;await navigator.geolocation.getCurrentPosition((e=>{const n={latitude:e.coords.latitude,longitude:e.coords.longitude};void 0!==n?c.sendRequest("POST","/addQuote",{quoteCopy:t,location:n,_csrf:o}):c.handleLocationError("Unable to access your location!")}))},s=e=>{if(0===e.quotes.length||!e.quotes)return React.createElement("div",null,React.createElement("h3",{className:"pageHeader"},"No thoughts. Head empty."));const t=e.quotes.map((t=>React.createElement("div",{className:"quoteObject",key:t._id},React.createElement("h2",null,t.quoteCopy),t.boosted?React.createElement("h3",null,"(quote aleady boosted)"):React.createElement("button",{onClick:()=>d(e.username,t,e.csrf)},"Boost quote?"))));return React.createElement("div",null,React.createElement("h1",{className:"pageHeader"},e.username,"'s Quotes"),t)},l=async(e,t,o)=>{const n=t._id,a=o.value;c.sendRequest("PUT","/addVote",{quoteID:n,voteValue:e,_csrf:a})},d=async(e,t,o)=>{const n=t._id,a=o;c.sendRequest("PUT","/boostQuote",{quoteID:n,_csrf:a});const r=await fetch("/getOwnerQuotes",{method:"GET",headers:{Accept:"application/json"}}),l=(await r.json()).quotes;ReactDOM.render(React.createElement(s,{username:e,csrf:a,quotes:l}),document.getElementById("content")),ReactDOM.render("",document.getElementById("content2"))};e.exports={QuoteMakerWindow:e=>React.createElement("form",{id:"lqForm",onSubmit:r,name:"lqForm",action:"/addQuote",method:"POST",className:"mainForm"},React.createElement("label",{htmlFor:"quoteCopy"},"What did ",React.createElement("b",null,"you")," hear?"),React.createElement("input",{id:"quoteCopy",type:"text",name:"quoteCopy",placeholder:"enter quote"}),React.createElement("input",{id:"_csrf",type:"hidden",name:"_csrf",value:e.csrf}),React.createElement("input",{className:"submitQuote",type:"submit",value:"Submit Quote"})),QuoteContainer:e=>{const[t,o]=n(e.quotes);if(a((()=>{const e=setInterval((async()=>{await navigator.geolocation.getCurrentPosition((async e=>{const t={latitude:e.coords.latitude,longitude:e.coords.longitude};if(void 0!==t){const e=await fetch("/getQuotes?longitude="+t.longitude+"&latitude="+t.latitude,{method:"GET",headers:{Accept:"application/json"}}),n=(await e.json()).quotes;o(n)}else c.handleLocationError("Unable to access your location!")}))}),1e4);return()=>clearInterval(e)})),0===t.length||!t)return React.createElement("div",null,React.createElement("h3",{className:"pageHeader"},"No thoughts. Head empty."));const r=t.map((e=>React.createElement("div",{className:"quoteObject",key:e._id},React.createElement("h2",null,e.boosted&&React.createElement("i",null,"Ad: "),e.quoteCopy),React.createElement("h3",null,"(overheard by ",e.owner,")"),React.createElement("div",{className:"popularityObject"},React.createElement("h3",null,"Popularity: ",e.votes),React.createElement("button",{onClick:()=>l(!0,e,_csrf)},"Like"),React.createElement("button",{onClick:()=>l(!1,e,_csrf)},"Dislike")))));return React.createElement("div",null,React.createElement("h1",{className:"pageHeader"},"Here's what people are hearing:"),r)},OwnerQuoteContainer:s}},603:e=>{const t=e=>{document.getElementById("errorText").textContent=e,document.getElementById("errorMessage").classList.remove("hidden"),setTimeout((()=>{document.getElementById("errorMessage").classList.add("hidden")}),12e3)};e.exports={handleError:t,handleLocationError:e=>{document.getElementById("locationErrorText").textContent=e,document.getElementById("locationErrorMessage").classList.remove("hidden"),setTimeout((()=>{document.getElementById("locationErrorMessage").classList.add("hidden")}),12e3)},sendRequest:async(e,o,n,a)=>{const c=await fetch(o,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),r=await c.json();document.getElementById("errorMessage").classList.add("hidden"),r.redirect&&(window.location=r.redirect),r.error&&t(r.error),a&&a(r)}}}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,o),c.exports}(()=>{const{QuoteMakerWindow:e,QuoteContainer:t,OwnerQuoteContainer:n}=o(59),a=o(603),c=async o=>{await navigator.geolocation.getCurrentPosition((async n=>{const c={latitude:n.coords.latitude,longitude:n.coords.longitude};if(void 0!==c){const e=await fetch("/getQuotes?longitude="+c.longitude+"&latitude="+c.latitude,{method:"GET",headers:{Accept:"application/json"}}),n=await e.json();ReactDOM.render(React.createElement(t,{quotes:n.quotes,csrf:o}),document.getElementById("content"))}else a.handleLocationError("Unable to access your location!");ReactDOM.render(React.createElement(e,{csrf:o}),document.getElementById("content2"))}),(t=>{ReactDOM.render(React.createElement(e,{csrf:o}),document.getElementById("content2"))}))};window.onload=async()=>{const e=await fetch("/getToken"),t=(await e.json()).csrfToken,o=await fetch("/getUsername"),a=(await o.json()).username,r=document.getElementById("mainAppButton"),s=document.getElementById("ownerQuoteButton");r.addEventListener("click",(e=>(e.preventDefault(),c(t),!1))),s.addEventListener("click",(async e=>{e.preventDefault();const o=await fetch("/getOwnerQuotes",{method:"GET",headers:{Accept:"application/json"}}),c=(await o.json()).quotes;return ReactDOM.render(React.createElement(n,{username:a,csrf:t,quotes:c}),document.getElementById("content")),ReactDOM.render("",document.getElementById("content2")),!1})),c(t)}})()})();